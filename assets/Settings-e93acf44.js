import{D as S,l as m,j as f,o as t,c as o,h as e,u as n,t as x,E as w,n as v,G as D,F as N,m as U,H as C,r as I,g as T,v as V,a as b,A as E}from"./index-10fd3ce4.js";const F={class:"user-photos"},P=e("h3",{class:"user-photos__title"},"Фотографии пользователя",-1),j=["onSubmit"],B={key:0,class:"user-photos__select"},R=e("span",null,"Загрузить картинки",-1),A={key:1,class:"user-photos__upload"},L={key:0,class:"loading loading_sm"},M=e("div",{class:"loading__spiner"},null,-1),q=[M],G={key:1,class:"user-photos__btn"},H={key:0,class:"user-photos__content"},z=["src"],J={__name:"UserPhotos",setup(y){let i=S(),s=m(null),a=m(!1);function l(g){s.value=[...g.target.files],console.log(s.value)}async function r(){s.value&&(a.value=!0,await i.writeUserImages(s.value),setTimeout(()=>{s.value=null,a.value=!1},500))}let p=f(()=>i.images);return(g,_)=>(t(),o("div",F,[P,e("form",{class:"user-photos__form",onSubmit:D(r,["prevent"]),action:""},[n(s)?(t(),o("div",A,[e("span",null,"Выбрано: "+x(n(s).length),1),n(a)?(t(),o("div",L,q)):(t(),o("button",G,"Добавить в профиль")),n(a)?v("",!0):(t(),o("button",{key:2,type:"button",class:"user-photos__btn user-photos__btn_red",onClick:_[0]||(_[0]=u=>w(s)?s.value=null:s=null)},"Отменить"))])):(t(),o("label",B,[R,e("input",{class:"user-photos__input",onChange:l,type:"file",accept:"image/jpeg,image/png,image/gif",multiple:""},null,32)]))],40,j),n(p)?(t(),o("div",H,[(t(!0),o(N,null,U(n(p),(u,h)=>(t(),o("div",{class:"user-photos__card",key:h},[e("img",{src:u.img_path,alt:"",class:"user-photos__img"},null,8,z)]))),128))])):v("",!0)]))}},K={class:"container settings"},O=["onSubmit"],Q={class:"settings__label"},W=e("span",null,"Имя пользователя",-1),X={class:"settings__upload"},Y=["src"],Z={key:1,class:"loading loading_sm"},ee=e("div",{class:"loading__spiner"},null,-1),se=[ee],te={key:2,class:"settings__submit"},oe={__name:"Settings",setup(y){let i=S(),s=C(),a=m(""),l=m({}),r=m(!1);function p(){a.value&&l.value.img?(r.value=!0,setTimeout(()=>{i.writeUserData(a.value,l.value),r.value=!1},1e3)):(s.setError("Укажите имя и выберите аватарку"),setTimeout(()=>{s.clearError()},5e3))}function g(k){const c=k.target.files[0],d=new FileReader;d.readAsDataURL(c),d.onload=()=>{l.value={img:d.result,info:c}}}let _=f(()=>i.userName),u=f(()=>i.userImg);function h(){a.value=_?_.value:"",l.value.img=u?u.value:null}return h(),(k,c)=>{const d=I("font-awesome-icon");return t(),o("div",K,[e("form",{action:"",onSubmit:D(p,["prevent"]),class:"settings__form",enctype:"multipart/form-data"},[e("label",Q,[W,T(e("input",{"onUpdate:modelValue":c[0]||(c[0]=$=>w(a)?a.value=$:a=$),type:"text",placeholder:"Введите имя",required:""},null,512),[[V,n(a)]])]),e("label",X,[e("span",null,[b(d,{icon:["fas","arrow-up-from-bracket"]}),E(" Аватарка ")]),e("input",{onChange:g,class:"settings__file",type:"file",accept:"image/jpeg,image/png,image/gif"},null,32)]),n(l).img?(t(),o("img",{key:0,class:"settings__img",src:n(l).img,alt:""},null,8,Y)):v("",!0),n(r)?(t(),o("div",Z,se)):(t(),o("button",te,"Изменить"))],40,O),b(J)])}}},ae={class:"main"},le={__name:"Settings",setup(y){return(i,s)=>(t(),o("main",ae,[b(oe)]))}};export{le as default};
