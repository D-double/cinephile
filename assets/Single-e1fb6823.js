import{r as h,o as a,c as l,h as t,u as o,z as y,t as c,A as w,n as _,a as u,g as $,B as v,F as b,m as D,f as p,w as f,i as S,d as x,b as R,y as A,C as B,j as m,p as C,T as F}from"./index-10fd3ce4.js";const T={key:0,class:"single__wrapper"},N=["src"],V={class:"single__content"},j={class:"single__left"},I={class:"single__title"},L={class:"single__desc"},U={class:"single__about"},Y={key:0,class:"single__time"},z={class:"single__right"},E=["src"],H={class:"single__block"},M=t("h3",{class:"single__subtitle"},"В главных ролях",-1),q={class:"single__actors"},G={__name:"SingleContent",props:["type","current"],setup(e){return(n,s)=>{const r=h("Trailer"),i=h("Actors");return e.current?(a(),l("div",T,[t("img",{src:o(y)+e.current.backdrop_path,alt:"",class:"single__bg"},null,8,N),t("div",V,[t("div",j,[t("h1",I,c(e.current.title||e.current.name),1),t("p",L,c(e.current.overview),1),t("p",U,[w(c(new Date(e.current.release_date).getFullYear()||new Date(e.current.first_air_date).getFullYear())+", "+c(Array.isArray(e.current.genres)?e.current.genres.map(d=>d.name).join(", "):"")+" ",1),e.current.runtime?(a(),l("span",Y,c(new Date(0,0,0,0,e.current.runtime).getHours())+"h "+c(new Date(0,0,0,0,e.current.runtime).getMinutes())+"m ",1)):_("",!0)]),u(r)]),t("div",z,[t("img",{src:o(y)+e.current.poster_path,alt:"",class:"single__img"},null,8,E)]),t("div",H,[M,t("div",q,[u(i,{type:e.type,id:e.current.id,count:6},null,8,["type","id"])])])])])):_("",!0)}}},J={key:0,class:"additional container"},K={class:"additional__item"},O=t("h4",null,"Бюджет",-1),P={class:"additional__item"},Q=t("h4",null,"Сборы",-1),W={class:"additional__item"},X=t("h4",null,"Статус",-1),Z={class:"additional__item"},ee=t("h4",null,"Исходное название",-1),te={__name:"Additional",props:["current"],setup(e){return(n,s)=>e.current?(a(),l("div",J,[$(t("div",K,[O,t("p",null,"$"+c(e.current.budget),1)],512),[[v,e.current.budget]]),$(t("div",P,[Q,t("p",null,"$"+c(e.current.revenue),1)],512),[[v,e.current.revenue]]),t("div",W,[X,t("p",null,c(e.current.status),1)]),t("div",Z,[ee,t("p",null,c(e.current.original_title||e.current.original_name),1)])])):_("",!0)}},ne={key:0,class:"recommend container"},se={class:"recommend__title"},ce={class:"recommend__content"},re=["src"],ie={__name:"Recommend",props:["type","recommend"],setup(e){return(n,s)=>{const r=h("router-link");return e.recommend?(a(),l("div",ne,[t("h2",se,c(e.recommend.length>0?"Рекомендации":"Рекомендаций нет"),1),t("div",ce,[(a(!0),l(b,null,D(e.recommend,i=>(a(),p(r,{key:i.id,to:`/${e.type}/${i.id}`,class:"recommend__card"},{default:f(()=>[t("img",{src:o(S)+i.poster_path,alt:"",class:"recommend__img"},null,8,re)]),_:2},1032,["to"]))),128))])])):_("",!0)}}},ae=x("recommend",{state:()=>({info:null}),actions:{async getRecommend(e,n){try{const r=await(await fetch(`https://api.themoviedb.org/3/${n}/${e}/recommendations?language=ru&page=1`,R)).json();this.info=r.results}catch(s){console.log(s)}}}}),oe={key:0,class:"single"},le={key:1,class:"loading"},de=t("div",{class:"loading__spiner"},null,-1),ue=[de],ge={__name:"Single",props:{type:String},setup(e){const n=e,s=A();let r=B();r.getDetails(s.params.id,n.type);let i=m(()=>r.info),d=ae();d.getRecommend(s.params.id,n.type);let k=m(()=>d.info),g=m(()=>s.params.id);return C(g,()=>{g.value&&(r.getDetails(s.params.id,n.type),d.getRecommend(s.params.id,n.type))}),(_e,me)=>(a(),p(F,{name:"upcoming"},{default:f(()=>[o(i)?(a(),l("div",oe,[u(G,{type:n.type,current:o(i)},null,8,["type","current"]),u(te,{current:o(i)},null,8,["current"]),u(ie,{type:n.type,recommend:o(k)},null,8,["type","recommend"])])):(a(),l("div",le,ue))]),_:1}))}};export{ge as _};
