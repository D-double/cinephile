import{D as x,l as d,H as S,j as q,x as w,y as R,u as s,o as i,c as u,h as t,g as p,v as m,t as f,n as v,G as T,E as $,a as B}from"./index-10fd3ce4.js";const C={key:0,class:"loading"},D=t("div",{class:"loading__spiner"},null,-1),N=[D],P={key:1,class:"container enter"},A={class:"enter__label"},M=t("span",null,"E-mail",-1),j={class:"enter__label"},G={key:0,class:"enter__label"},H=t("span",null,"Повторить пароль",-1),I={key:1,class:"enter__confirm"},z={class:"enter__submit"},F={__name:"EnterUser",setup(g){let _=x(),r=d({}),a=S(),E=q(()=>a.loading);const h=w(),y=R();function b(){if(c.value){const{email:l,pass:e}=r.value;_.registerUser(l,e).then(()=>{h.push({name:"home"})}).catch(o=>{a.setError(o.message),setTimeout(()=>{a.clearError()},5e3)})}}let c=d(!0);function k(){let{pass:l,confPass:e}=r.value;l==e?c.value=!0:c.value=!1}let n=d(!0);function U(){const{email:l,pass:e}=r.value;_.loginUser(l,e).then(()=>{h.push({name:"home"})}).catch(o=>{a.setError(o.message),setTimeout(()=>{a.clearError()},5e3)})}function V(){y.query.loginError&&(a.setError("Авторизуйтесь или зарегистрируйтесь для просмотра"),setTimeout(()=>{a.clearError()},5e3))}return V(),(l,e)=>s(E)?(i(),u("div",C,N)):(i(),u("div",P,[t("form",{action:"",onSubmit:e[3]||(e[3]=T(o=>s(n)?U():b(),["prevent"])),class:"enter__form"},[t("label",A,[M,p(t("input",{"onUpdate:modelValue":e[0]||(e[0]=o=>s(r).email=o),type:"email",placeholder:"Введите email",required:""},null,512),[[m,s(r).email]])]),t("label",j,[t("span",null,f(s(n)?"Пароль":"Придумать пароль"),1),p(t("input",{"onUpdate:modelValue":e[1]||(e[1]=o=>s(r).pass=o),type:"password",placeholder:"Введите пароль",required:""},null,512),[[m,s(r).pass]])]),s(n)?v("",!0):(i(),u("label",G,[H,p(t("input",{onInput:k,"onUpdate:modelValue":e[2]||(e[2]=o=>s(r).confPass=o),type:"password",placeholder:"Повторите пароль",required:""},null,544),[[m,s(r).confPass]])])),s(c)?v("",!0):(i(),u("p",I,"Пароли не совпадают")),t("button",z,f(s(n)?"Вход":"Регистрация"),1)],32),t("p",{onClick:e[4]||(e[4]=o=>$(n)?n.value=!s(n):n=!s(n)),class:"enter__change"},f(s(n)?"Перейти к регистрации":"Вход в систему"),1)]))}},J={class:"main"},L={__name:"Enter",setup(g){return(_,r)=>(i(),u("main",J,[B(F)]))}};export{L as default};
